<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ROS Selection Task &mdash; A.T.O.M&#39;s Wiki 0.2.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
    <link rel="shortcut icon" href="https://github.com/atom-robotics-lab/assets/blob/main/logo_with_background.jpg?raw=true"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Computer Vision Selection Task" href="CV_Selection_Task.html" />
    <link rel="prev" title="Selection Task 2022-2023" href="Selection_Tasks.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> A.T.O.M's Wiki
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tool Setup</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tool_setup/tool_setup.html">Tool Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intro to ROS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ros/ros.html">Intro To ROS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Selection Tasks 2022 - 2023</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Selection_Tasks.html">Selection Tasks 2022 - 2023</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ROS Selection Task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#problem-statement">Problem statement</a></li>
<li class="toctree-l3"><a class="reference internal" href="#expected-output">Expected Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hints">Hints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sample-code-snippet">Sample Code Snippet</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-video">Output video</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#procedure">Procedure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="CV_Selection_Task.html">CV Selection Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Elec_Selection_Task.html">Electronics Selection Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="CAD_Selection_Task.html">CAD Selection Task</a></li>
<li class="toctree-l2"><a class="reference internal" href="Selection_Tasks.html#task-submission">Task submission</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Task_Submission.html">Task Submission</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Access Repo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/access-repo.html">Using the access repo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archives</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../archives/previous_tasks.html">Previous Tasks</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Socials</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://linktr.ee/a.t.o.m_robotics_lab">Linktree</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">A.T.O.M's Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="Selection_Tasks.html">Selection Task 2022-2023</a></li>
      <li class="breadcrumb-item active">ROS Selection Task</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/atom-robotics-lab/wiki/blob/main/markdown/selection_task/ROS_Selection_Task.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ros-selection-task">
<h1>ROS Selection Task<a class="headerlink" href="#ros-selection-task" title="Permalink to this heading"></a></h1>
<section id="problem-statement">
<h2>Problem statement<a class="headerlink" href="#problem-statement" title="Permalink to this heading"></a></h2>
<ul>
<li><p>The objective of the task is to move the turtle inside the turtlesim
window in a vertical D shape of radius 1 unit.</p></li>
<li><p>To acheive this task you are supposed to create a node named
/node_turtle_revolve within a python script,
node_turtle_revolve.py</p>
<p>Dont worry if you are new to ROS or Linux(Ubuntu), the task
is fairly simple and we have provided you with ample resource and
tutorials in this WIKI to the complete this task so only a strong
will and a little bit of brains is required to get the work done.
Also even though this just a weekend task we have provided ample
amount of time as we also have our midterm exams during this time. So
we think a week time is enough so you guys can give your exams freely
and manage your time in order to complete the task</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the resources to complete the said task are provided in
the ROS section of ATOM WIKI. So make sure to check it out if you are
new to ROS.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <strong>Deadline</strong> for completing the task: <strong>11th December, 2022</strong></p>
</div>
</section>
<section id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this heading"></a></h2>
<center><iframe width="560" height="315" src="https://www.youtube.com/embed/TaMQco4vvIc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center><br><div class="admonition note">
<p class="admonition-title">Note</p>
<p>THE TURTLE SHOULD STOP AT THE INITIAL POINT ONLY.</p>
</div>
</section>
<section id="hints">
<h2>Hints<a class="headerlink" href="#hints" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The turtle needs to move in a vertical ‘D’ shape with a radius of 1 unit
during its sem-circular motion.</p></li>
<li><p>Use linear velocity as well as angular velocity with some combination
to get this done.</p></li>
<li><p>Keep tracking the distance travelled so as to know when to stop. You
can refer to Overview of rospy for more hint</p></li>
</ul>
<section id="sample-code-snippet">
<h3>Sample Code Snippet<a class="headerlink" href="#sample-code-snippet" title="Permalink to this heading"></a></h3>
<p><strong>Question:</strong> Write a python code to move ROS’s turtlesim bot on a straight path
while bot’s distance is less than 6.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#! /usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">geometry_msgs.msg</span> <span class="kn">import</span> <span class="n">Twist</span>
<span class="kn">from</span> <span class="nn">turtlesim.msg</span> <span class="kn">import</span> <span class="n">Pose</span>

<span class="n">my_X</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">my_Y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">x_dist</span> <span class="o">=</span> <span class="mi">6</span>

<span class="c1"># Subscriber Callback that gives position of the turtle (x &amp; y)</span>
<span class="k">def</span> <span class="nf">pose_callback</span><span class="p">(</span><span class="n">pose</span><span class="p">):</span>

   <span class="k">global</span> <span class="n">my_X</span><span class="p">,</span> <span class="n">my_Y</span>
   <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Robot X = </span><span class="si">%f</span><span class="s2">: Robot Y=</span><span class="si">%f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">pose</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">pose</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
   <span class="n">my_X</span> <span class="o">=</span> <span class="n">pose</span><span class="o">.</span><span class="n">x</span>
   <span class="n">my_Y</span> <span class="o">=</span> <span class="n">pose</span><span class="o">.</span><span class="n">y</span>

<span class="k">def</span> <span class="nf">move_turtle</span><span class="p">(</span><span class="n">lin_vel</span><span class="p">):</span>

   <span class="k">global</span> <span class="n">my_X</span>
   <span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;move_turtle&#39;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
   <span class="n">pub</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Publisher</span><span class="p">(</span><span class="s1">&#39;/turtle1/cmd_vel&#39;</span><span class="p">,</span> <span class="n">Twist</span><span class="p">,</span> <span class="n">queue_size</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
   <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;/turtle1/pose&#39;</span><span class="p">,</span><span class="n">Pose</span><span class="p">,</span> <span class="n">pose_callback</span><span class="p">)</span>

   <span class="n">rate</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Rate</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># 10hz</span>
   <span class="n">vel</span> <span class="o">=</span> <span class="n">Twist</span><span class="p">()</span>
   <span class="k">while</span> <span class="ow">not</span> <span class="n">rospy</span><span class="o">.</span><span class="n">is_shutdown</span><span class="p">():</span>

      <span class="n">vel</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">lin_vel</span>
      <span class="n">vel</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">vel</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">vel</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">vel</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="n">vel</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>

      <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Linear Vel = </span><span class="si">%f</span><span class="s2">: &quot;</span><span class="p">,</span> <span class="n">lin_vel</span><span class="p">)</span>

      <span class="c1"># Stop the turtle when it reaches x_dist</span>
      <span class="k">if</span><span class="p">(</span><span class="n">x_dist</span> <span class="o">&lt;</span> <span class="n">my_X</span> <span class="p">):</span>
         <span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Turtle Reached destination&quot;</span><span class="p">)</span>
         <span class="n">rospy</span><span class="o">.</span><span class="n">logwarn</span><span class="p">(</span><span class="s2">&quot;Stopping Turtle&quot;</span><span class="p">)</span>

         <span class="k">break</span>

      <span class="n">pub</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel</span><span class="p">)</span>
      <span class="n">rate</span><span class="o">.</span><span class="n">sleep</span><span class="p">()</span>

<span class="n">move_turtle</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="output-video">
<h3>Output video<a class="headerlink" href="#output-video" title="Permalink to this heading"></a></h3>
<center><iframe width="560" height="315" src="https://www.youtube.com/embed/tjGNhEe-S_k" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></center><br><p>Commands used:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>roscore
rosrun turtlesim turtlesim_node
rosrun package_name script_name
</pre></div>
</div>
</section>
</section>
<section id="procedure">
<h2>Procedure<a class="headerlink" href="#procedure" title="Permalink to this heading"></a></h2>
<p>Follow the instructions given below to get started with the task.</p>
<ul class="simple">
<li><p>First, you will need to create a package named selection_task within
your ROS workspace. Once your package is created, source and build
your workspace.</p></li>
<li><p>Within this package, you should have a ‘scripts’ folder inside which
you’ll create a python script, named node_turtle_revolve.py.</p></li>
<li><p>Fill the script with proper programming ethics. Doing this will help
us understand your code better and quicker than usual.</p></li>
<li><p>After completing the python script. Make it executable, if it isn’t
already. To do that, enter the following code.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws
catkin_make
<span class="nb">source</span> devel/setup.bash
chmod +x ~/catkin_ws/src/selection_task/scripts/node_turtle_revolve.py
</pre></div>
</div>
<ul class="simple">
<li><p>Before executing make sure that roscore is running along with
turtlesim_node. You can either run them in separate terminals or
simply create a selection_task.launch file inside the
<code class="docutils literal notranslate"><span class="pre">~/catkin_ws/src/selection_task/launch/</span></code> folder. Launch file can
run multiple nodes unlike a python/cpp script. Run the launch file,
enter, This should run three processes in parallel.</p></li>
<li><p>roscore</p></li>
<li><p>turtlesim_node</p></li>
<li><p>node_turtle_revolve.py</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Please refer to the tutorials and resouces given in the wiki or visit
the official <a class="reference external" href="http://wiki.ros.org/Documentation">ROSWIKI</a> if you
need help with anything regarding ROS.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Selection_Tasks.html" class="btn btn-neutral float-left" title="Selection Task 2022-2023" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="CV_Selection_Task.html" class="btn btn-neutral float-right" title="Computer Vision Selection Task" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, A.T.O.M.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>