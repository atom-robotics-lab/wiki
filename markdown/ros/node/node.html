<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. ROS Nodes &mdash; A.T.O.M&#39;s Wiki 0.0.3 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="https://github.com/atom-robotics-lab/assets/blob/main/logo_with_background.jpg?raw=true"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="6. ROS Master" href="../master/master.html" />
    <link rel="prev" title="4. ROS Package" href="../package/package.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> A.T.O.M's Wiki
          </a>
              <div class="version">
                0.0.3
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../tool_setup/tool_setup.html">Tool Setup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Intro to ROS</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../ros.html">1. Intro To ROS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">2. ROS installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../catkin_ws.html">3. Create Workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="../package/package.html">4. ROS Package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">5. ROS Nodes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-ros-node">5.1. Creating a ROS Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command">5.2. Command</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#command-rosrun">5.2.1. Command: rosrun</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#to-create-an-executable-python-file">5.2.1.1. To create an executable python file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#command-rosnode">5.2.2. Command: rosnode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../master/master.html">6. ROS Master</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/example.html">7. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../launch/launch.html">8. ROS Launch Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comm/comm.html">9. ROS Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comm/topics/topics.html">10. ROS Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../comm/topics/rostopic.html">11. rostopic command</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the Access Repo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general/access-repo.html">Using the access repo</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Archives</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../archives/sel-task_cad_2022/selection-task.html">Selection Task</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archives/sel-task_cad_2022/cad_sel.html">CAD Selection Task: Standard Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archives/sel-task2021/selection-task.html">Selection Task 2021</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../archives/sel-task2022/selection-task.html">Selection Task 2022</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">A.T.O.M's Wiki</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">5. </span>ROS Nodes</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/atom-robotics-lab/wiki/blob/main/markdown/ros/node/node.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ros-nodes">
<h1><a class="toc-backref" href="#id1"><span class="section-number">5. </span>ROS Nodes</a><a class="headerlink" href="#ros-nodes" title="Permalink to this heading"></a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#ros-nodes" id="id1">ROS Nodes</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-a-ros-node" id="id2">Creating a ROS Node</a></p></li>
<li><p><a class="reference internal" href="#command" id="id3">Command</a></p>
<ul>
<li><p><a class="reference internal" href="#command-rosrun" id="id4">Command: rosrun</a></p>
<ul>
<li><p><a class="reference internal" href="#to-create-an-executable-python-file" id="id5">To create an executable python file</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#command-rosnode" id="id6">Command: rosnode</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<ul class="simple">
<li><p>A ROS Node is a piece of software/executable that uses ROS to
communicate with other ROS Nodes.</p></li>
<li><p>ROS Nodes are building block of any ROS Application.</p></li>
<li><p>For example, if you have a wall-following robot then one ROS Node
could get distance sensor values and another node can control the
motors of the robot. So, these two nodes will communicate with each
other in order to move the robot.</p></li>
<li><p>You can write your entire ROS Application in a single node but having
multiple nodes ensures that if a node crashes it won’t crash your
entire ROS application.</p></li>
<li><p>A ROS package can have multiple ROS Nodes.</p></li>
<li><p>Python and C++ are majorly used to write ROS Nodes.</p></li>
</ul>
<section id="creating-a-ros-node">
<h2><a class="toc-backref" href="#id2"><span class="section-number">5.1. </span>Creating a ROS Node</a><a class="headerlink" href="#creating-a-ros-node" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>In this section we will learn how to create a ROS Node inside
pkg_ros_basics ROS Package which we created in the previous section.</p></li>
<li><p>Navigate to pkg_ros_basics</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src/pkg_ros_basics
</pre></div>
</div>
<p>OR</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>roscd pkg_ros_basics
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>roscd will work only if you have sourced setup.bash of your</p>
</div>
<p>catkin workspace.</p>
<ul class="simple">
<li><p>Create a scripts folder for your Python scripts and navigate into the
folder.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>mkdir scripts
<span class="nb">cd</span> scripts
</pre></div>
</div>
<ul class="simple">
<li><p>Create a Python script called node_hello_ros.py .</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>touch node_hello_ros.py
</pre></div>
</div>
<ul class="simple">
<li><p>Open the script in any text-editor and start editing.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>gedit node_hello_ros.py
</pre></div>
</div>
<ul class="simple">
<li><p>First line of all your Python ROS scripts should be the following
shebang</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Now write a ROS Node to print Hello World! on the console.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">rospy</span>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="c1">#Initialize the new node</span>
<span class="n">rospy</span><span class="o">.</span><span class="n">init_node</span><span class="p">(</span><span class="s1">&#39;node_hello_ros&#39;</span><span class="p">,</span> <span class="n">anonymous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#  Print info on console.</span>
<span class="n">rospy</span><span class="o">.</span><span class="n">loginfo</span><span class="p">(</span><span class="s2">&quot;Hello World!&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">rospy</span><span class="o">.</span><span class="n">ROSInterruptException</span><span class="p">:</span>
        <span class="k">pass</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Make your node executable</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo chmod +x node_hello_ros.py
</pre></div>
</div>
<ul>
<li><p>Now to run your node</p>
<ul class="simple">
<li><p>Open the terminal and run ROS master</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>roscore
</pre></div>
</div>
<ul class="simple">
<li><p>Once the roscore is running open a new terminal and run the main
node</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosrun pkg_ros_basics node_hello_ros.py
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This command will work only if you have sourced setup.bash of your catkin workspace either manually or using .bashrc .</p>
</div>
</li>
</ul>
</section>
<section id="command">
<h2><a class="toc-backref" href="#id3"><span class="section-number">5.2. </span>Command</a><a class="headerlink" href="#command" title="Permalink to this heading"></a></h2>
<section id="command-rosrun">
<h3><a class="toc-backref" href="#id4"><span class="section-number">5.2.1. </span>Command: rosrun</a><a class="headerlink" href="#command-rosrun" title="Permalink to this heading"></a></h3>
<p>rosrun allows you to run an executable in an arbitrary package from
anywhere without having to give its full path or cd/roscd there ﬁrst.</p>
<p>Usage:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosrun &lt;package&gt; &lt;executable&gt;
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">&lt;package&gt;</span></code> is nothing but the package name which you have created
using catkin_create_pkg command or used any other package.</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;executable&gt;</span></code> is the python or cpp ﬁle.</p>
<section id="to-create-an-executable-python-file">
<h4><a class="toc-backref" href="#id5"><span class="section-number">5.2.1.1. </span>To create an executable python file</a><a class="headerlink" href="#to-create-an-executable-python-file" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>After creating a package, create a folder in the package names as
scripts folder to store all the python ﬁles in that folder.</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src/&lt;package&gt;
mkdir scripts
</pre></div>
</div>
<ul class="simple">
<li><p>Here we can create python scripts by running this command by going
into the scripts directory,</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> scripts
touch filename.py
</pre></div>
</div>
<ul class="simple">
<li><p>Now you can edit your python ﬁle and before running you have to make
it executable by running this command once,</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws/src/&lt;package&gt;/scripts
chmod +x filename.py
</pre></div>
</div>
<ul class="simple">
<li><p>Here we can create cpp ﬁles by running this command by going into the
src directory,</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> src
touch filename.cpp
</pre></div>
</div>
<p>Now you can edit your cpp ﬁle , but for making it executable we have to
edit the CMakeLists.txt ﬁle</p>
<p>Add these few lines at the bottom of CMakeLists.txt ﬁle,</p>
<div class="highlight-m notranslate"><div class="highlight"><pre><span></span>add_executable(filename src/filename.cpp)
target_link_libraries(filename ${catkin_LIBRARIES})
</pre></div>
</div>
<p>Then run this command,</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/catkin_ws
catkin build
</pre></div>
</div>
</section>
</section>
<section id="command-rosnode">
<h3><a class="toc-backref" href="#id6"><span class="section-number">5.2.2. </span>Command: rosnode</a><a class="headerlink" href="#command-rosnode" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>rosnode contains the rosnode command-line tool for displaying debug
information about ROS Nodes.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For quick information about any command, be that outside of ROS,</p>
</div>
<p>simply type the command along with suﬃx –h or -help . This is a widely
used concept among other Linux Command: rosrun commands for quick
references. Here’s an example for rosnode –h command</p>
<ul>
<li><p class="rubric" id="list">list</p>
</li>
</ul>
<p>rosnode list displays a list of all current nodes.</p>
<p>Let’s ﬁgure out what argument the list sub-command needs. In a new
terminal run start the rosmaster:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>roscore
</pre></div>
</div>
<p>And in another terminal, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosrun rospy_tutorials talker
</pre></div>
</div>
<p>And in another terminal, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosnode list
</pre></div>
</div>
<p>Now the node named talker (node with word talker in it) will be printed
on the terminal.</p>
<ul>
<li><p class="rubric" id="info">info</p>
</li>
<li><p>rosnode info /node_name displays information about a node, including
publications and subscriptions.</p></li>
<li><p>Let’s ﬁgure out what argument the info sub-command needs. In a new
terminal run start the</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosmaster
</pre></div>
</div>
<p>And in another terminal, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosrun rospy_tutorials talker
</pre></div>
</div>
<p>And in another terminal, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosnode info &lt;talker_node&gt;
</pre></div>
</div>
<p>This should give details of the particular node</p>
<ul>
<li><p class="rubric" id="kill">kill</p>
</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>rosnode kill is not guaranteed to succeed.</p>
</div>
<ul class="simple">
<li><p>Let’s ﬁgure out what argument the kill sub-command needs. In a new
terminal run start the rosmaster:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>roscore
</pre></div>
</div>
<ul class="simple">
<li><p>And in another terminal, run:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosrun rospy_tutorials talker
</pre></div>
</div>
<ul class="simple">
<li><p>And in another terminal, run:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>rosnode <span class="nb">kill</span> rosout &lt;talker_node&gt;
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../package/package.html" class="btn btn-neutral float-left" title="4. ROS Package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../master/master.html" class="btn btn-neutral float-right" title="6. ROS Master" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, A.T.O.M.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>